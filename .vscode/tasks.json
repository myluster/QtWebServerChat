{
    "version": "2.0.0",
    "tasks": [
        {
            // 构建所有微服务
            "label": "build-services",
            "type": "shell",
            "command": "mkdir -p build && cd build && cmake .. && make -j$(nproc)",
            "group": {
                "kind": "build",                    // 构建任务组
                "isDefault": true                   // 默认构建任务
            },
            "presentation": {
                "echo": true,                       // 在终端中显示命令
                "reveal": "always",                 // 总是显示终端
                "focus": false,                     // 不聚焦到终端
                "panel": "shared"                   // 使用共享终端面板
            },
            "options": {
                "cwd": "${workspaceFolder}/Services" // 工作目录
            },
            "problemMatcher": [
                "$gcc"                              // GCC错误匹配器
            ]
        },
        {
            // 清理并构建
            "label": "clean-build",
            "type": "shell",
            "command": "rm -rf build && mkdir -p build && cd build && cmake .. && make -j$(nproc)",
            "group": "build",                       // 构建任务组
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            },
            "options": {
                "cwd": "${workspaceFolder}/Services"
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            // Docker构建
            "label": "docker-build",
            "type": "shell",
            "command": "docker-compose build",
            "group": "build",                       // 构建任务组
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            },
            "options": {
                "cwd": "${workspaceFolder}/Docker"  // Docker工作目录
            }
        }
    ]
}